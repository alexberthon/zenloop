<% if step.kind == "line" %>
  <div
    class="ticket-wrap"
    data-action="mouseenter->journey#toggleLineHighlight mouseleave->journey#toggleLineHighlight"
    data-journey-step-id-param="<%= step.line.id %>">
    <div class="delete-btn">
      <a href="#" data-action="click->journey#removeStepFromJourney" data-journey-step-id-param="<%= step.id %>">
        <i class="fa-solid fa-trash"></i>
      </a>
    </div>
    <div class='ticket-concatenation'>
      <div class="ticket-left-banner">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="130">
          <path fill="white" d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v128a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V76c0-1.105.901-2.015 1.976-2.272C4.345 73.16 8 71.408 8 66c0-5.408-3.655-7.16-6.024-7.728C.9 58.015 0 57.105 0 56V2Z"/>
        </svg>
      </div>
      <div class="ticket ticket-line">
        <div class="ticket-top">
          <div class="ticket-city-start">
            <p class="ticket-city-name"><strong><%= step.line.station_start.city.name.upcase.truncate(12) %></strong></p>
            <p class="ticket-text-small"><%= step.line.station_start.name.truncate(16) %></p>
          </div>
          <div class="ticket-logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="78" height="28" fill="none" viewBox="0 0 78 28">
              <path stroke="#E6612F" stroke-dasharray="2 2" stroke-linecap="round" d="M8.926 14.089h13.947M52.409 14.089h16.665"/>
              <circle cx="37.641" cy="13.909" r="13.409" fill="#fff" stroke="#E6612F"/>
              <circle cx="5.029" cy="13.909" r="3.897" fill="#fff" stroke="#E6612F"/>
              <circle cx="72.971" cy="13.909" r="3.897" fill="#fff" stroke="#E6612F"/>
              <path fill="#E6612F" d="M37.01 7.794h-5.484v5.941h.002v6.48H46.65v-1.62h-1.63c1.354 0 2.117-1.552 1.284-2.619l-1.814-2.24v4.86h-3.78l-.667-.862a3.376 3.376 0 0 0-2.677-1.299h-5.3v-2.7H44.49l-.938-1.08h-.002l-.003-.004-2.816-3.236a5.092 5.092 0 0 0-3.72-1.62Zm3.303 1.956.097.114 2.425 2.79h-6.87a3.181 3.181 0 0 1-2.558-1.295l-.671-.908c-.314-.426-.01-1.036.517-1.036h6.256c.33 0 .593.092.804.335Z"/>
              <path fill="#E6612F" d="M42.875 15.895h-1.08a.542.542 0 0 1-.54-.54c0-.297.243-.54.54-.54h1.08c.297 0 .54.243.54.54 0 .297-.243.54-.54.54Z"/>
            </svg>
          </div>
          <div class="ticket-city-end">
            <p class="ticket-city-name"><strong><%= step.line.station_end.city.name.upcase.truncate(12) %></strong></p>
            <p class="ticket-text-small"><%= step.line.station_end.name.truncate(16) %></p>
          </div>
        </div>
        <div class="ticket-dotted-line"></div>
        <div class="ticket-bottom">
          <div class="ticket-data">
            <p class="ticket-text-small text-distance">Distance</p>
            <p style="font-size:14px"><strong><%=(Geocoder::Calculations.distance_between([step.line.station_start.latitude, step.line.station_start.longitude],[step.line.station_end.latitude,step.line.station_end.longitude])).round()%></strong>km</p>
          </div>
          <div class="ticket-data">
            <p class="ticket-text-small text-duration">Duration </p>
            <p style="font-size:14px"><strong><%= step.duration / 60 %></strong>h<strong><%= (step.duration % 60).to_s.rjust(2, '0') %>
              </strong></p>
          </div>
        </div>
      </div>
      <div class="ticket-right-banner">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="130">
          <path fill="white" d="M.5 2a2 2 0 0 1 2-2H16a2 2 0 0 1 2 2v54c0 1.105-.901 2.015-1.976 2.272C13.655 58.84 10 60.592 10 66c0 5.408 3.655 7.16 6.024 7.728C17.1 73.985 18 74.895 18 76v54a2 2 0 0 1-2 2H2.5a2 2 0 0 1-2-2V2Z"/>
        </svg>
      </div>
    </div>
  </div>
<% else %>
  <div class="ticket-wrap">
    <div class="delete-btn">
      <a href="#" data-action="click->journey#removeStepFromJourney" data-journey-step-id-param="<%= step.id %>">
        <i class="fa-solid fa-trash"></i>
      </a>
    </div>
    <div class="ticket ticket-stay">
      <% if step.stay.city.photo.present? %>
        <div class="ticket-bg" style="background-image: url('<%= cl_image_path step.stay.city.photo.key %>')"></div>
      <% else %>
        <div class="ticket-bg"></div>
      <% end %>
      <div class="stay-header">
        <div class="stay-city"><%= step.stay.city.name.upcase %></div>
        <div class="stay-country"> <%= step.stay.city.country %></div>
      </div>
      <div class="stay-duration">
        <i class="fa-regular fa-clock"></i>
        <%= step.stay.duration / 60 / 24 %> days
      </div>
    </div>
  </div>
<% end %>
